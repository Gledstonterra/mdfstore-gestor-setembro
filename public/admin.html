<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Gestor de Catálogo MDF</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }
        .tab-button {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 0.75rem 1.25rem;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            color: #475569;
            font-weight: 500;
        }
        .tab-button:hover {
            background-color: #e2e8f0;
            color: #1e293b;
        }
        .tab-button.active {
            border-left-color: #3b82f6;
            background-color: #e0f2fe;
            color: #3b82f6;
            font-weight: 600;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .form-input { 
            width: 100%; 
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid #cbd5e1;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #bfdbfe;
        }
        .btn {
            padding: 0.6rem 1rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .btn-primary { background-color: #3b82f6; color: white; }
        .btn-primary:hover { background-color: #2563eb; }
        .btn-secondary { background-color: #64748b; color: white; }
        .btn-secondary:hover { background-color: #475569; }
        .btn-danger { background-color: #ef4444; color: white; }
        .btn-danger:hover { background-color: #dc2626; }
    </style>
</head>
<body class="antialiased text-slate-800">

    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-lg my-8">
        <div class="flex">
            <aside class="w-64 border-r border-slate-200 p-4">
                <header class="mb-6 p-2">
                    <h1 class="text-xl font-bold">Sistema Gestor</h1>
                    <p class="text-sm text-slate-500">Menu Principal</p>
                </header>
                <nav class="flex flex-col space-y-2">
                    <button class="tab-button active" data-tab="tab-cadastro"><i class="fa-solid fa-plus w-5 text-center"></i><span>Cadastro de Produto</span></button>
                    <button class="tab-button" data-tab="tab-gestao"><i class="fa-solid fa-list-check w-5 text-center"></i><span>Gestão de Catálogo</span></button>
                    <button class="tab-button" data-tab="tab-importar"><i class="fa-solid fa-file-excel w-5 text-center"></i><span>Importar / Exportar</span></button>
                </nav>
            </aside>

            <main class="flex-1 p-6 sm:p-8">
                <div id="tab-cadastro" class="tab-content active">
                    <form id="product-form" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-6">
                            <input type="hidden" id="productId">
                            
                            <section>
                                <h2 class="text-lg font-semibold mb-3 border-b pb-2">Informações do Produto</h2>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label for="marca" class="block text-sm font-medium text-slate-600 mb-1">Marca</label>
                                        <select id="marca" name="marca" class="form-input" required></select>
                                    </div>
                                    <div>
                                        <label for="linha" class="block text-sm font-medium text-slate-600 mb-1">Linha/Grupo</label>
                                        <select id="linha" name="linha" class="form-input"></select>
                                    </div>
                                    <div class="sm:col-span-2">
                                        <label for="nome" class="block text-sm font-medium text-slate-600 mb-1">Nome do Padrão</label>
                                        <input type="text" id="nome" name="nome" class="form-input" required>
                                    </div>
                                    <div>
                                        <label for="textura" class="block text-sm font-medium text-slate-600 mb-1">Textura</label>
                                        <select id="textura" name="textura" class="form-input">
                                            <option value="">Selecione...</option>
                                            <option value="Fosca">Fosca</option>
                                            <option value="Brilhante">Brilhante</option>
                                            <option value="Madeirada">Madeirada</option>
                                            <option value="Trama">Trama</option>
                                            <option value="Lisa">Lisa</option>
                                            <option value="Rústica">Rústica</option>
                                            <option value="Outros">Outros</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="acabamento" class="block text-sm font-medium text-slate-600 mb-1">Acabamento</label>
                                        <select id="acabamento" name="acabamento" class="form-input">
                                            <option value="">Selecione...</option>
                                            <option value="Fosco">Fosco</option>
                                            <option value="Brilho">Brilho</option>
                                            <option value="Alto Brilho">Alto Brilho</option>
                                            <option value="Texturizado">Texturizado</option>
                                            <option value="Soft">Soft</option>
                                            <option value="Matt">Matt</option>
                                            <option value="Outros">Outros</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="dimensao_padrao" class="block text-sm font-medium text-slate-600 mb-1">Dimensão Padrão</label>
                                        <input type="text" id="dimensao_padrao" name="dimensao_padrao" class="form-input" placeholder="Ex: 2750x1850mm">
                                    </div>
                                    <div class="sm:col-span-2">
                                         <label for="descricao" class="block text-sm font-medium text-slate-600 mb-1">Descrição</label>
                                         <textarea id="descricao" name="descricao" rows="3" class="form-input"></textarea>
                                    </div>
                                    <div class="sm:col-span-2">
                                         <label for="combinacoes" class="block text-sm font-medium text-slate-600 mb-1">Combinações Recomendadas</label>
                                         <input type="text" id="combinacoes" name="combinacoes" class="form-input" placeholder="Separe por vírgulas">
                                    </div>
                                    <div>
                                        <label for="preco_fita_65mm_rolo" class="block text-sm font-medium text-slate-600 mb-1">Preço Rolo Fita 65mm (R$)</label>
                                        <input type="number" step="0.01" id="preco_fita_65mm_rolo" name="preco_fita_65mm_rolo" class="form-input">
                                    </div>
                                    <div>
                                        <label for="metragem_rolo_fita" class="block text-sm font-medium text-slate-600 mb-1">Metragem Rolo Fita (m)</label>
                                        <input type="number" id="metragem_rolo_fita" name="metragem_rolo_fita" class="form-input">
                                    </div>
                                    <div class="sm:col-span-2">
                                        <label for="imagem" class="block text-sm font-medium text-slate-600 mb-1">Imagem do Produto</label>
                                        <input type="file" id="imagem" name="imagem" accept="image/*" class="form-input">
                                        <img id="image-preview" class="hidden mt-4 rounded-md h-32 w-auto" alt="Pré-visualização da imagem">
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2 class="text-lg font-semibold mb-3 border-b pb-2">Espessuras e Preços</h2>
                                <div id="thickness-container" class="space-y-2"></div>
                                <button type="button" id="add-thickness-btn" class="btn btn-secondary mt-2"><i class="fa-solid fa-plus"></i>Adicionar Espessura</button>
                            </section>

                            <div class="flex space-x-4 pt-4 border-t">
                                 <button type="submit" class="btn btn-primary">Salvar Produto</button>
                                 <button type="button" id="clear-form-btn" class="btn btn-secondary">Limpar Formulário</button>
                            </div>
                        </div>
                        
                        <aside class="lg:col-span-1 bg-slate-50 p-6 rounded-lg h-fit">
                            <h3 class="text-lg font-semibold mb-3 flex items-center"><i class="fa-solid fa-wand-magic-sparkles text-blue-500 mr-2"></i>Cadastro Assistido por IA</h3>
                            <p class="text-sm text-slate-600 mb-4">Informe a marca e o nome para gerar um prompt. Use-o para obter os dados, cole o resultado e preencha o formulário.</p>
                            
                            <div class="space-y-3">
                                 <div>
                                    <label for="ia-marca" class="block text-sm font-medium text-slate-600 mb-1">Marca</label>
                                    <input type="text" id="ia-marca" class="form-input" placeholder="Ex: Duratex">
                                </div>
                                <div>
                                    <label for="ia-nome" class="block text-sm font-medium text-slate-600 mb-1">Nome do Padrão</label>
                                    <input type="text" id="ia-nome" class="form-input" placeholder="Ex: Freijó Puro">
                                </div>
                                <button type="button" id="generate-prompt-btn" class="btn btn-primary w-full">Gerar Prompt</button>
                            </div>
                            
                            <div id="prompt-area" class="hidden mt-4">
                                <label for="ia-prompt-output" class="block text-sm font-medium text-slate-600 mb-1">Copie este prompt:</label>
                                <textarea id="ia-prompt-output" rows="4" class="form-input" readonly></textarea>
                                <label for="ia-results-input" class="block text-sm font-medium text-slate-600 mb-1 mt-2">Cole o resultado aqui:</label>
                                <textarea id="ia-results-input" rows="5" class="form-input"></textarea>
                                <button type="button" id="fill-form-btn" class="btn btn-primary w-full mt-2">Preencher Formulário</button>
                            </div>
                        </aside>
                    </form>
                </div>

                <div id="tab-gestao" class="tab-content">
                    <div class="flex items-center mb-4">
                        <label for="filter-marca" class="mr-2 text-sm font-medium">Filtrar por Marca:</label>
                        <select id="filter-marca" class="form-input w-fit"></select>
                    </div>
                    <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <!-- Produtos carregados pela API aparecerão aqui -->
                    </div>
                </div>

                <div id="tab-importar" class="tab-content">
                     <div class="max-w-xl space-y-6">
                        <section class="p-6 border rounded-lg">
                            <h2 class="text-lg font-semibold mb-3">Exportar Template</h2>
                            <p class="text-slate-600 mb-4">Baixe um arquivo Excel (.xlsx) com o modelo correto para o cadastro em massa de produtos.</p>
                            <button id="export-template-btn" class="btn btn-primary"><i class="fa-solid fa-file-arrow-down"></i>Exportar Template</button>
                        </section>
                        <section class="p-6 border rounded-lg">
                            <h2 class="text-lg font-semibold mb-3">Importar Arquivo</h2>
                            <p class="text-slate-600 mb-4">Selecione o arquivo Excel (.xlsx) preenchido para cadastrar múltiplos produtos de uma só vez.</p>
                            <input type="file" id="import-file-input" accept=".xlsx, .xls" class="form-input">
                        </section>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script src="admin_logic.js"></script>
</body>
</html>

